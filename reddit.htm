<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>
<body>

<script>
  function auth() {
    location.href = "https://www.reddit.com/api/v1/authorize?client_id=YLjftky9J_8E7A&response_type=token&state=test&redirect_uri=http://digitalpacman.github.io/reddit.htm&scope=identity";
  }

  function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var expression = "[#?&]" + name + "=([^&]+)";
    var regex = new RegExp(expression);
    var results = regex.exec(url);
    if (!results) return null;
    if (!results[1]) return '';
    return decodeURIComponent(results[1].replace(/\+/g, " "));
  }

  $(function() {
    window.token = getParameterByName("access_token");
    if (window.token) {
      $("#authView").show();
      $("#unauthView").hide();
    }
    else {
      $("#authView").hide();
    }
  })

  function callApi(token, method, url, success) {
    $.ajax(url, {
      method: method,
      contentType: false,
      headers: {
        Authorization: "bearer " + token
      },
      success: success
    });
  }

  function readProfile() {
    callApi(window.token, "GET", "https://www.reddit.com/api/v1/me", function(data) {
      alert(data)
    })
  }
</script>
<div id="unauthView">
  <button onclick="auth()">Login</button>
</div>
<div id="authView">
<p>authorized</p>
<button onclick="readProfile()">Read my profile</button>

</div>
</body>
</html>